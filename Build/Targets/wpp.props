<Project ToolsVersion="4.0" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  <!-- ****************************************************************************************************** -->
  <!--                            Режим использования утилиты                                                 -->
  <!-- ****************************************************************************************************** -->
  <!-- Для всех файлов из наборов @(ClCompile) и @(OtherWpp) устанавливаются свойства 						  -->
  <!--     WppKernelMode при сборке для режима ядра;      							  						  -->
  <!--     WppDllMacro   при сборке для пользовательского ядра;      							  		      -->
  <!-- ****************************************************************************************************** -->
  <ItemDefinitionGroup>
    <ClCompile>
      <WppKernelMode Condition="'$(IsKernelModeToolset)' == 'true'">true</WppKernelMode>
      <WppDllMacro   Condition="'$(IsUserModeToolset)'   == 'true'">true</WppDllMacro>
    </ClCompile>
    <OtherWpp>
      <WppKernelMode Condition="'$(IsKernelModeToolset)' == 'true'">true</WppKernelMode>
      <WppDllMacro   Condition="'$(IsUserModeToolset)'   == 'true'">true</WppDllMacro>
    </OtherWpp>
  </ItemDefinitionGroup>
  <!-- ****************************************************************************************************** -->
  <!--                            Способ сборки утилиты                                                       -->
  <!-- ****************************************************************************************************** -->
  <!-- Для всех файлов из наборов @(ClCompile) и @(OtherWpp) устанавливаются свойства 						  -->
  <!--     WppEnabled                    = false (при его отсутствии);      							  	  -->
  <!--     WppMinimalRebuildFromTracking = true  (при его отсутствии);      							      -->
  <!--     WppEnableOutputDirectory      = true  (при его отсутствии);      							      -->
  <!-- ****************************************************************************************************** -->
  <ItemDefinitionGroup>
    <ClCompile>
      <WppEnabled                    Condition="'%(ClCompile.WppEnabled)'                    == ''">false</WppEnabled>
      <WppMinimalRebuildFromTracking Condition="'%(ClCompile.WppMinimalRebuildFromTracking)' == ''">true</WppMinimalRebuildFromTracking>
      <WppEnableOutputDirectory      Condition="'%(ClCompile.WppEnableOutputDirectory)'      == ''">true</WppEnableOutputDirectory>
    </ClCompile>
    <OtherWpp>
      <WppEnabled                    Condition="'%(OtherWpp.WppEnabled)'                    == ''">false</WppEnabled>
      <WppMinimalRebuildFromTracking Condition="'%(OtherWpp.WppMinimalRebuildFromTracking)' == ''">true</WppMinimalRebuildFromTracking>
      <WppEnableOutputDirectory      Condition="'%(OtherWpp.WppEnableOutputDirectory)'      == ''">true</WppEnableOutputDirectory>
    </OtherWpp>
  </ItemDefinitionGroup>
  <!-- ****************************************************************************************************** -->
  <!--                            Использование каталогов утилитой                                            -->
  <!-- ****************************************************************************************************** -->
  <!-- Для всех файлов из наборов @(ClCompile) и @(OtherWpp) устанавливаются свойства 						  -->
  <!--     WppTrackerLogDirectory = $(TLogLocation) (при его отсутствии);      							  	  -->
  <!--     WppOutputDirectory     = $(IntDir)       (при его отсутствии);      							  	  -->
  <!-- ****************************************************************************************************** -->
  <ItemDefinitionGroup>
    <ClCompile>
      <WppTrackerLogDirectory      Condition="'%(ClCompile.WppTrackerLogDirectory)' == ''">$(TLogLocation)</WppTrackerLogDirectory>
      <WppOutputDirectory          Condition="'%(ClCompile.WppOutputDirectory)'     == ''">$(IntDir)</WppOutputDirectory>
    </ClCompile>
    <OtherWpp>
      <WppTrackerLogDirectory      Condition="'%(OtherWpp.WppTrackerLogDirectory)'  == ''">$(TLogLocation)</WppTrackerLogDirectory>
      <WppOutputDirectory          Condition="'%(OtherWpp.WppOutputDirectory)'      == ''">$(IntDir)</WppOutputDirectory>
    </OtherWpp>
  </ItemDefinitionGroup>
  <!-- ****************************************************************************************************** -->
  <!--                            Имя модуля, связанного с сообщениями трассировки                            -->
  <!-- ****************************************************************************************************** -->
  <!-- Для всех файлов из наборов @(ClCompile) и @(OtherWpp), для которых присутствует свойство               -->
  <!-- WppAddAlternateNameToMessageGUID, устанавливается свойство 						  				      -->
  <!--     WppModuleName = %(WppAddAlternateNameToMessageGUID) (при его отсутствии)							  -->
  <!-- ****************************************************************************************************** -->
  <ItemDefinitionGroup>
    <ClCompile       Condition="'%(ClCompile.WppAddAlternateNameToMessageGUID)' != ''">
      <WppModuleName Condition="'%(ClCompile.WppModuleName)' == ''">%(ClCompile.WppAddAlternateNameToMessageGUID)</WppModuleName>
    </ClCompile>
    <OtherWpp        Condition="'%(OtherWpp.WppAddAlternateNameToMessageGUID)' != ''">
      <WppModuleName Condition="'%(OtherWpp.WppModuleName)' == ''">%(OtherWpp.WppAddAlternateNameToMessageGUID)</WppModuleName>
    </OtherWpp>
  </ItemDefinitionGroup>
</Project>
